this.GlobalPayments=this.GlobalPayments||{},this.GlobalPayments.ThreeDSecure=function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function c(e,a,c,u){return new(c=c||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function u(n,r){var o,i,a,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){c.label=t[1];break}if(6===t[0]&&c.label<a[1]){c.label=a[1],a=t;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(t);break}a[2]&&c.ops.pop(),c.trys.pop();continue}t=r.call(n,c)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function e(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function t(n){if(n.__esModule)return n;var r=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(e){var t=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return n[e]}})}),r}self.fetch||(self.fetch=function(u,s){return s=s||{},new Promise(function(e,t){var n,r=new XMLHttpRequest,o=[],i=[],a={},c=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:c,headers:{keys:function(){return o},entries:function(){return i},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(n in r.open(s.method||"get",u,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){o.push(t=t.toLowerCase()),i.push([t,n]),a[t]=a[t]?a[t]+","+n:n}),e(c())},r.onerror=t,r.withCredentials="include"==s.credentials,s.headers)r.setRequestHeader(n,s.headers[n]);r.send(s.body||null)})}),Array.prototype.forEach||(Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)});for(var r=function(e){var t=p(e),e=t[0],t=t[1];return 3*(e+t)/4-t},o=function(e){var t,n,r=p(e),o=r[0],r=r[1],i=new f(function(e,t){return 3*(e+t)/4-t}(o,r)),a=0,c=0<r?o-4:o;for(n=0;n<c;n+=4)t=d[e.charCodeAt(n)]<<18|d[e.charCodeAt(n+1)]<<12|d[e.charCodeAt(n+2)]<<6|d[e.charCodeAt(n+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=255&t;2===r&&(t=d[e.charCodeAt(n)]<<2|d[e.charCodeAt(n+1)]>>4,i[a++]=255&t);1===r&&(t=d[e.charCodeAt(n)]<<10|d[e.charCodeAt(n+1)]<<4|d[e.charCodeAt(n+2)]>>2,i[a++]=t>>8&255,i[a++]=255&t);return i},i=function(e){for(var t,n=e.length,r=n%3,o=[],i=0,a=n-r;i<a;i+=16383)o.push(function(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(r));return o.join("")}(e,i,a<i+16383?a:i+16383));1==r?(t=e[n-1],o.push(s[t>>2]+s[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],o.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return o.join("")},s=[],d=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,y=a.length;h<y;++h)s[h]=a[h],d[a.charCodeAt(h)]=h;function p(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63;var g,A={byteLength:r,toByteArray:o,fromByteArray:i},I=(e(function(e,t){function n(e){for(var t=e.length,n=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return A.fromByteArray(n)}function r(e){for(var t=A.toByteArray(e),n=t.length,r="",o=0;o<n;o++)r+=String.fromCharCode(t[o]);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.base64decode=t.base64encode=void 0,t.base64encode=n,t.base64decode=r,window.btoa=window.btoa||n,window.atob=window.atob||r}),e(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.JSON=void 0,i.JSON={},function(){function t(e){return e<10?"0"+e:e}var e;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":""},e=String.prototype,Number.prototype.JSON=e.JSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var l,d,f,n=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function h(e){return r.lastIndex=0,r.test(e)?'"'+e.replace(r,function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof i.JSON.stringify&&(i.JSON.stringify=function(e,t,n){var r;if(d=l="","number"==typeof n)for(r=0;r<n;r+=1)d+=" ";else"string"==typeof n&&(d=n);if((f=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,n){var r,o,i,a,c,u=l,s=n[t];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(t)),"function"==typeof f&&(s=f.call(n,t,s)),typeof s){case"string":return h(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(l+=d,c=[],"[object Array]"===Object.prototype.toString.apply(s,[])){for(a=s.length,r=0;r<a;r+=1)c[r]=e(r.toString(),s)||"null";return i=0===c.length?"[]":l?"[\n"+l+c.join(",\n"+l)+"\n"+u+"]":"["+c.join(",")+"]",l=u,i}if(f&&"object"==typeof f)for(a=f.length,r=0;r<a;r+=1)"string"==typeof f[r]&&(i=e(o=f[r],s))&&c.push(h(o)+(l?": ":":")+i);else for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i=e(o,s))&&c.push(h(o)+(l?": ":":")+i);return i=0===c.length?"{}":l?"{\n"+l+c.join(",\n"+l)+"\n"+u+"}":"{"+c.join(",")+"}",l=u,i}}("",{"":e})}),"function"!=typeof i.JSON.parse&&(i.JSON.parse=function(e,a){if(e=String(e),n.lastIndex=0,n.test(e)&&(e=e.replace(n,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=new Function("return ("+e+")")(),"function"==typeof a?function e(t,n){var r,o,i=t[n];if(i&&"object"==typeof i)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(o=e(i,r),i[r]=o);return a.call(t,n,i)}({"":e},""):e;throw new SyntaxError("JSON.parse")})}()}));e(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),window.JSON=window.JSON||I.JSON});Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(e){Object.freeze=(g=Object.freeze,function(e){return"function"==typeof e?e:g(e)})}Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e){return void 0!==this[e]}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){var t,n=[];for(t in e)void 0!==e.hasOwnProperty&&e.hasOwnProperty(t)&&n.push(t);return n}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();e.forEach(function(e){var t=e instanceof Node;n.appendChild(t?e:document.createTextNode(String(e)))}),this.insertBefore(n,this.firstChild)}})});var m=setTimeout;function N(e){return Boolean(e&&void 0!==e.length)}function w(){}function b(e){if(!(this instanceof b))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],S(e,this)}function T(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,b._immediateFn(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void C(r.promise,e)}M(r.promise,e)}else(1===n._state?M:C)(r.promise,n._value)})):n._deferreds.push(r)}function M(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof b)return t._state=3,t._value=e,void v(t);if("function"==typeof n)return void S((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,v(t)}catch(e){C(t,e)}var r,o}function C(e,t){e._state=2,e._value=t,v(e)}function v(e){2===e._state&&0===e._deferreds.length&&b._immediateFn(function(){e._handled||b._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)T(e,e._deferreds[t]);e._deferreds=null}function E(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function S(e,t){var n=!1;try{e(function(e){n||(n=!0,M(t,e))},function(e){n||(n=!0,C(t,e))})}catch(e){if(n)return;n=!0,C(t,e)}}b.prototype.catch=function(e){return this.then(null,e)},b.prototype.then=function(e,t){var n=new this.constructor(w);return T(this,new E(e,t,n)),n},b.prototype.finally=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})},b.all=function(t){return new b(function(o,i){if(!N(t))return i(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return o([]);var c=a.length;for(var e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(n,e)},i)}a[n]=e,0==--c&&o(a)}catch(e){i(e)}}(e,a[e])})},b.allSettled=function(n){return new this(function(o,e){if(!n||void 0===n.length)return e(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(n);if(0===i.length)return o([]);var a=i.length;for(var t=0;t<i.length;t++)!function t(n,e){if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(n,e)},function(e){i[n]={status:"rejected",reason:e},0==--a&&o(i)})}i[n]={status:"fulfilled",value:e},0==--a&&o(i)}(t,i[t])})},b.resolve=function(t){return t&&"object"==typeof t&&t.constructor===b?t:new b(function(e){e(t)})},b.reject=function(n){return new b(function(e,t){t(n)})},b.race=function(o){return new b(function(e,t){if(!N(o))return t(new TypeError("Promise.race accepts an array"));for(var n=0,r=o.length;n<r;n++)b.resolve(o[n]).then(e,t)})},b._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){m(e,0)},b._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var j=t(Object.freeze({__proto__:null,default:b}));e(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),window.Promise=window.Promise||j.default||j});String.prototype.repeat||(String.prototype.repeat=function(e){for(var t="",n=0;n<e;n++)t+=this;return t});e(function(e,t){Object.defineProperty(t,"__esModule",{value:!0})});function R(e){var t="";switch(e){case 1:return"ONE_BIT";case 2:t+="TWO";break;case 4:t+="FOUR";break;case 8:t+="EIGHT";break;case 15:t+="FIFTEEN";break;case 16:t+="SIXTEEN";break;case 24:case 30:t+="TWENTY_FOUR";break;case 32:t+="THIRTY_TWO";break;case 48:t+="FORTY_EIGHT";break;default:throw new Error("Unknown color depth '"+e+"'")}return t+"_BITS"}function D(e){var t=0,n=0;switch(e.size||e.windowSize){case l.ChallengeWindowSize.Windowed250x400:t=250,n=400;break;case l.ChallengeWindowSize.Windowed390x400:t=390,n=400;break;case l.ChallengeWindowSize.Windowed500x600:t=500,n=600;break;case l.ChallengeWindowSize.Windowed600x400:t=600,n=400}return{height:t,width:n}}function O(e){switch(e){case l.AuthenticationRequestType.AddCard:case l.AuthenticationRequestType.CardholderVerification:case l.AuthenticationRequestType.MaintainCard:return l.MessageCategory.NonPayment;case l.AuthenticationRequestType.InstalmentTransaction:case l.AuthenticationRequestType.PaymentTransaction:case l.AuthenticationRequestType.RecurringTransaction:default:return l.MessageCategory.Payment}}(r=l.AuthenticationSource||(l.AuthenticationSource={})).Browser="BROWSER",r.MobileSDK="MOBILE_SDK",r.StoredRecurring="STORED_RECURRING",(o=l.AuthenticationRequestType||(l.AuthenticationRequestType={})).AddCard="ADD_CARD",o.CardholderVerification="CARDHOLDER_VERIFICATION",o.InstalmentTransaction="INSTALMENT_TRANSACTION",o.MaintainCard="MAINTAIN_CARD",o.PaymentTransaction="PAYMENT_TRANSACTION",o.RecurringTransaction="RECURRING_TRANSACTION",(i=l.ChallengeRequestIndicator||(l.ChallengeRequestIndicator={})).ChallengeMandated="CHALLENGE_MANDATED",i.ChallengePreferred="CHALLENGE_PREFERRED",i.NoChallengeRequested="NO_CHALLENGE_REQUESTED",i.NoPreference="NO_PREFERENCE",(r=l.ChallengeWindowSize||(l.ChallengeWindowSize={})).FullScreen="FULL_SCREEN",r.Windowed250x400="WINDOWED_250X400",r.Windowed390x400="WINDOWED_390X400",r.Windowed500x600="WINDOWED_500X600",r.Windowed600x400="WINDOWED_600X400",(o=l.MessageCategory||(l.MessageCategory={})).NonPayment="NON_PAYMENT_AUTHENTICATION",o.Payment="PAYMENT_AUTHENTICATION",(i=l.MethodUrlCompletion||(l.MethodUrlCompletion={})).Unavailable="UNAVAILABLE",i.No="NO",i.Yes="YES",(r=l.TransactionStatus||(l.TransactionStatus={})).AuthenticationAttemptedButNotSuccessful="AUTHENTICATION_ATTEMPTED_BUT_NOT_SUCCESSFUL",r.AuthenticationCouldNotBePerformed="AUTHENTICATION_COULD_NOT_BE_PERFORMED",r.AuthenticationFailed="AUTHENTICATION_FAILED",r.AuthenticationIssuerRejected="AUTHENTICATION_ISSUER_REJECTED",r.AuthenticationSuccessful="AUTHENTICATION_SUCCESSFUL",r.ChallengeRequired="CHALLENGE_REQUIRED",(o=l.TransactionStatusReason||(l.TransactionStatusReason={})).CardAuthenticationFailed="CARD_AUTHENTICATION_FAILED",o.UnknownDevice="UNKNOWN_DEVICE",o.UnsupportedDevice="UNSUPPORTED_DEVICE",o.ExceedsAuthenticationFrequencyLimit="EXCEEDS_AUTHENTICATION_FREQUENCY_LIMIT",o.ExpiredCard="EXPIRED_CARD",o.InvalidCardNumber="INVALID_CARD_NUMBER",o.InvalidTransaction="INVALID_TRANSACTION",o.NoCardRecord="NO_CARD_RECORD",o.SecurityFailure="SECURITY_FAILURE",o.StolenCard="STOLEN_CARD",o.SuspectedFraud="SUSPECTED_FRAUD",o.TransactionNotPermittedToCardholder="TRANSACTION_NOT_PERMITTED_TO_CARDHOLDER",o.CardholderNotEnrolledInService="CARDHOLDER_NOT_ENROLLED_IN_SERVICE",o.TransactionTimedOutAtTheAcs="TRANSACTION_TIMED_OUT_AT_THE_ACS",o.LowConfidence="LOW_CONFIDENCE",o.MediumConfidence="MEDIUM_CONFIDENCE",o.HighConfidence="HIGH_CONFIDENCE",o.VeryHighConfidence="VERY_HIGH_CONFIDENCE",o.ExceedsAcsMaximumChallenges="EXCEEDS_ACS_MAXIMUM_CHALLENGES",o.NonPaymentTransactionNotSupported="NON_PAYMENT_TRANSACTION_NOT_SUPPORTED",o.ThreeriTransactionNotSupported="THREERI_TRANSACTION_NOT_SUPPORTED";var _,U,L,P=(_=Error,n(U=z,L=_),U.prototype=null===L?Object.create(L):(G.prototype=L.prototype,new G),z);function G(){this.constructor=U}function z(e,t){t=_.call(this,t||"Error: see `reasons` property")||this;return t.error=!0,t.reasons=e,t}function x(e,t,n){window.parent!==window&&window.parent.postMessage({data:t,event:e},n||window.location.origin)}function Z(i,a){return c(this,void 0,void 0,function(){var t,n,r,o;return u(this,function(e){switch(e.label){case 0:t={"Content-Type":"application/json"},e.label=1;case 1:return e.trys.push([1,6,,7]),[4,fetch(i,{body:JSON.stringify(a),credentials:"omit",headers:"undefined"!=typeof Headers?new Headers(t):t,method:"POST"})];case 2:return(r=e.sent()).ok?[3,4]:(n=P.bind,o={code:r.status.toString()},[4,r.text()]);case 3:throw new(n.apply(P,[void 0,[(o.message=e.sent(),o)],r.statusText]));case 4:return[4,r.json()];case 5:return[2,e.sent()];case 6:throw o=e.sent(),r=[{code:o.name,message:o.message}],o.reasons&&(r=r.concat(o.reasons)),new P(r);case 7:return[2]}})})}var i=/Windows Phone|IEMobile/.test(navigator.userAgent),r=/Android|iPad|iPhone|iPod/.test(navigator.userAgent),o=(0<window.innerWidth?window.innerWidth:screen.width)<=360||(0<window.innerHeight?window.innerHeight:screen.height)<=360,Y=i||!i&&(r||o),W=Math.random().toString(16).substr(2,8);function F(e,t){var n=function(){var e=document.createElement("div");e.setAttribute("id","GlobalPayments-overlay-"+W),e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.transition="all 0.3s ease-in-out",e.style.zIndex="100",Y&&(e.style.position="absolute !important",e.style.WebkitOverflowScrolling="touch",e.style.overflowX="hidden",e.style.overflowY="scroll");return document.body.appendChild(e),setTimeout(function(){e.style.background="rgba(0, 0, 0, 0.7)"},1),e}(),r=((s=document.createElement("img")).setAttribute("src","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48cGF0aCBkPSJNMzguNTIgMzMuMzdMMjEuMzYgMTYuMkE2My42IDYzLjYgMCAwIDEgNTkuNS4xNnYyNC4zYTM5LjUgMzkuNSAwIDAgMC0yMC45OCA4LjkyeiIgZmlsbD0iIzAwNzBiYSIgZmlsbC1vcGFjaXR5PSIxIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoNDUgNjQgNjQpIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgNjQgNjQpIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoMTM1IDY0IDY0KSIvPjxwYXRoIGQ9Ik0zOC41MiAzMy4zN0wyMS4zNiAxNi4yQTYzLjYgNjMuNiAwIDAgMSA1OS41LjE2djI0LjNhMzkuNSAzOS41IDAgMCAwLTIwLjk4IDguOTJ6IiBmaWxsPSIjYzBkY2VlIiBmaWxsLW9wYWNpdHk9IjAuMjUiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA2NCA2NCkiLz48cGF0aCBkPSJNMzguNTIgMzMuMzdMMjEuMzYgMTYuMkE2My42IDYzLjYgMCAwIDEgNTkuNS4xNnYyNC4zYTM5LjUgMzkuNSAwIDAgMC0yMC45OCA4LjkyeiIgZmlsbD0iI2MwZGNlZSIgZmlsbC1vcGFjaXR5PSIwLjI1IiB0cmFuc2Zvcm09InJvdGF0ZSgyMjUgNjQgNjQpIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxwYXRoIGQ9Ik0zOC41MiAzMy4zN0wyMS4zNiAxNi4yQTYzLjYgNjMuNiAwIDAgMSA1OS41LjE2djI0LjNhMzkuNSAzOS41IDAgMCAwLTIwLjk4IDguOTJ6IiBmaWxsPSIjYzBkY2VlIiBmaWxsLW9wYWNpdHk9IjAuMjUiIHRyYW5zZm9ybT0icm90YXRlKDMxNSA2NCA2NCkiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgdmFsdWVzPSIwIDY0IDY0OzQ1IDY0IDY0OzkwIDY0IDY0OzEzNSA2NCA2NDsxODAgNjQgNjQ7MjI1IDY0IDY0OzI3MCA2NCA2NDszMTUgNjQgNjQiIGNhbGNNb2RlPSJkaXNjcmV0ZSIgZHVyPSIxMjgwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg=="),s.setAttribute("id","GlobalPayments-loader-"+W),s.style.left="50%",s.style.position="fixed",s.style.background="#FFFFFF",s.style.borderRadius="50%",s.style.width="30px",s.style.zIndex="200",s.style.marginLeft="-15px",s.style.top="120px",s);document.body.appendChild(r);var o,i,a,c,u=D(t),s=u.height,u=u.width;s&&e.setAttribute("height",s+"px"),e.setAttribute("frameBorder","0"),u&&e.setAttribute("width",u+"px"),e.setAttribute("seamless","seamless"),e.style.zIndex="10001",e.style.position="absolute",e.style.transition="transform 0.5s ease-in-out",e.style.transform="scale(0.7)",e.style.opacity="0",n.appendChild(e),Y||t.windowSize===l.ChallengeWindowSize.FullScreen?(e.style.top="0px",e.style.bottom="0px",e.style.left="0px",e.style.marginLeft="0px;",e.style.width="100%",e.style.height="100%",e.style.minHeight="100%",e.style.WebkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0, 0, 0)",(s=document.createElement("meta")).name="viewport",s.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",document.getElementsByTagName("head")[0].appendChild(s)):(e.style.top="40px",e.style.left="50%",e.style.marginLeft="-"+u/2+"px"),e.onload=(o=e,i=r,a=n,c=t,function(){var e;o.style.opacity="1",o.style.transform="scale(1)",o.style.backgroundColor="#ffffff",i.parentNode&&i.parentNode.removeChild(i),(e=function(e){if(null!==document.getElementById("GlobalPayments-frame-close-"+W))return;var t=document.createElement("img");t.id="GlobalPayments-frame-close-"+W,t.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUJFRjU1MEIzMUQ3MTFFNThGQjNERjg2NEZCRjFDOTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUJFRjU1MEMzMUQ3MTFFNThGQjNERjg2NEZCRjFDOTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQkVGNTUwOTMxRDcxMUU1OEZCM0RGODY0RkJGMUM5NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQkVGNTUwQTMxRDcxMUU1OEZCM0RGODY0RkJGMUM5NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlHco5QAAAHpSURBVHjafFRdTsJAEF42JaTKn4glGIg++qgX4AAchHAJkiZcwnAQD8AF4NFHCaC2VgWkIQQsfl/jNJUik8Duzs/XmW9mN7Xb7VRc5vP5zWKxaK5Wq8Zmu72FqobfJG0YQ9M0+/l8/qFQKDzGY1JxENd1288vLy1s786KRZXJZCLber1Wn7MZt4PLarVnWdZ9AmQ8Hncc17UvymVdBMB/MgPQm+cFFcuy6/V6lzqDf57ntWGwYdBIVx0TfkBD6I9M35iRJgfIoAVjBLDZbA4CiJ5+9AdQi/EahibqDTkQx6fRSIHcPwA8Uy9A9Gcc47Xv+w2wzhRDYzqdVihLIbsIiCvP1NNOoX/29FQx3vgOgtt4FyRdCgPRarX4+goB9vkyAMh443cOEsIAAcjncuoI4TXWMAmCIGFhCQLAdZ8jym/cRJ+Y5nC5XCYAhINKpZLgSISZgoqh5iiLQrojAFICVwGS7tCfe5DbZzkP56XS4NVxwvTI/vXVVYIDnqmnnX70ZxzjNS8THHooK5hMpxHQIREA+tEfA9djfHR3MHkdx3Hspe9r3B+VzWaj2RESyR2mlCUE4MoGQDdxiwHURq2t94+PO9bMIYyTyDNLwMoM7g8+BfKeYGniyw2MdfSehF3Qmk1IvCc/AgwAaS86Etp38bUAAAAASUVORK5CYII=",t.style.transition="all 0.5s ease-in-out",t.style.opacity="0",t.style.float="left",t.style.position="absolute",t.style.left="50%",t.style.zIndex="99999999",t.style.top="30px";var n=D(e).width;n&&(t.style.marginLeft=n/2-8+"px");setTimeout(function(){t.style.opacity="1"},500),!Y&&e.windowSize!==l.ChallengeWindowSize.FullScreen||(t.style.float="right",t.style.top="20px",t.style.left="initial",t.style.marginLeft="0px",t.style.right="20px");return t}(c))&&(a.appendChild(e),e.addEventListener("click",function(){e&&Array.prototype.slice.call(document.querySelectorAll('[target$="-'+W+'"],[id$="-'+W+'"]')).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})},!0))})}function H(c,u,s){return new Promise(function(e,t){var n;s.timeout&&(n=setTimeout(function(){k(n),t(new Error("timeout reached"))},s.timeout));var r=document.createElement("iframe");r.id=r.name="GlobalPayments-3DSecure-"+W,r.style.display=s.hide?"none":"inherit";var o,i,a=function(e,t,n){var r=document.createElement("form");r.setAttribute("method","POST"),r.setAttribute("action",e),r.setAttribute("target",t);for(var o=0,i=n;o<i.length;o++){var a=i[o],c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name",a.name),c.setAttribute("value",a.value),r.appendChild(c)}return r}(c,r.id,u);switch(s.displayMode){case"redirect":return k(n),void t(new Error("Not implemented"));case"lightbox":F(r,s);break;case"embedded":default:if(!function(e,t,n){var r;r=n.hide?document.body:"string"==typeof n.target?document.querySelector(n.target):n.target;if(!r)return k(t.timeout||0),e(new Error("Embed target not found")),!1;e=D(n),n=e.height,e=e.width;t.iframe&&(t.iframe.setAttribute("height",n?n+"px":"100%"),t.iframe.setAttribute("width",e?e+"px":"100%"),r.appendChild(t.iframe));return!0}(t,{iframe:r,timeout:n},s))return}window.addEventListener("message",(o=e,i={origin:s.origin,timeout:n},function(e){(i.origin||window.location.origin)===e.origin&&(k(i.timeout||0),o(e.data))})),document.body.appendChild(a),a.submit()})}function k(e){e&&clearTimeout(e);try{Array.prototype.slice.call(document.querySelectorAll('[target$="-'+W+'"],[id$="-'+W+'"]')).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}catch(e){}}function J(){var e=new Date;return{colorDepth:screen&&R(screen.colorDepth),javaEnabled:navigator&&navigator.javaEnabled(),javascriptEnabled:!0,language:navigator&&navigator.language,screenHeight:screen&&screen.height,screenWidth:screen&&screen.width,time:e,timezoneOffset:e.getTimezoneOffset()/60,userAgent:navigator&&navigator.userAgent}}function B(t,n){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:if(!t.enrolled)throw new Error("Card not enrolled");return(n=n||{}).hide=void 0===n.hide||n.hide,n.timeout=void 0===n.timeout?3e4:n.timeout,t.methodUrl?[4,H(t.methodUrl,[{name:"threeDSMethodData",value:t.methodData}],n)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2,t]}})})}function V(r,o){return c(this,void 0,void 0,function(){var n;return u(this,function(e){switch(e.label){case 0:if(!r.challengeMandated&&r.status!==l.TransactionStatus.ChallengeRequired)return[3,2];if(r.challenge=r.challenge||{},!r.challenge.requestUrl)throw new Error("Invalid challenge state. Missing challenge URL");var t=r.challenge.messageType||"creq";return[4,H(r.challenge.requestUrl,[{name:t,value:r.challenge.encodedChallengeRequest}],o)];case 1:n=e.sent(),r.challenge.response=n,e.label=2;case 2:return[2,r]}})})}return l.checkVersion=function(r,o){return c(this,void 0,void 0,function(){var t,n;return u(this,function(e){switch(e.label){case 0:o=o||{},e.label=1;case 1:return e.trys.push([1,4,,5]),[4,Z(r,o)];case 2:return"ONE"===(n=e.sent()).version?[4,function(o,i){return c(this,void 0,void 0,function(){var r;return u(this,function(e){switch(e.label){case 0:if(!o.enrolled)throw new Error("Card not enrolled");if(!o.challengeMandated&&o.status!==l.TransactionStatus.ChallengeRequired)return[3,2];if(o.challenge=o.challenge||{},!o.challenge.requestUrl)throw new Error("Invalid challenge state. Missing challenge URL");var t=o.sessionDataFieldName||"MD",n=o.challenge.messageType||"PaReq";return[4,H(o.challenge.requestUrl,[{name:"TermUrl",value:o.TermUrl},{name:t,value:o.serverTransactionId},{name:n,value:o.challenge.encodedChallengeRequest}],i)];case 1:r=e.sent(),o.challenge.response=r,e.label=2;case 2:return[2,o]}})})}(n,o.challengeWindow)]:[4,B(n,o.methodWindow)];case 3:return[2,e.sent()];case 4:throw t=e.sent(),n=[{code:t.name,message:t.message}],t.reasons&&(n=n.concat(t.reasons)),new P(n);case 5:return[2]}})})},l.colorDepth=R,l.dimensionsFromChallengeWindowSize=D,l.getBrowserData=J,l.handle3dsVersionCheck=B,l.handleChallengeNotification=function(e,t){x("challengeNotification",e,t)},l.handleInitiateAuthentication=V,l.handleMethodNotification=function(e,t){x("methodNotification",e,t)},l.initiateAuthentication=function(r,o){return c(this,void 0,void 0,function(){var t,n;return u(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),o.authenticationSource=o.authenticationSource||l.AuthenticationSource.Browser,o.authenticationRequestType=o.authenticationRequestType||l.AuthenticationRequestType.PaymentTransaction,o.messageCategory=o.messageCategory||O(o.authenticationRequestType),o.challengeRequestIndicator=o.challengeRequestIndicator||l.ChallengeRequestIndicator.NoPreference,o.browserData=o.browserData||J(),[4,Z(r,o)];case 1:return[4,V(e.sent(),o.challengeWindow)];case 2:return[2,e.sent()];case 3:throw t=e.sent(),n=[{code:t.name,message:t.message}],t.reasons&&(n=n.concat(t.reasons)),new P(n);case 4:return[2]}})})},l.messageCategoryFromAuthenticationRequestType=O,Object.defineProperty(l,"__esModule",{value:!0}),l}({});
//# sourceMappingURL=globalpayments-3ds.min.js.map
